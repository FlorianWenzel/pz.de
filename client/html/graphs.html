<section class="hero is-dark is-medium">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">
        Die größten Gießer der #ZwiebelNation!
      </h1>
      <h2 class="subtitle">
        Insgesamt gegossene Zwiebeln: <span id="totalWateredOnions"></span>
      </h2>
    </div>
  </div>
</section>
<div id="giesser" class="dark">
</div>
<section class="hero is-primary is-medium">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">
        Plaudertaschen...
      </h1>
      <h2 class="subtitle">
        Insgesamt Twitch-Nachrichten verschickt: <span id="totalMessagesSent"></span>
      </h2>
    </div>
  </div>
</section>
<div id="chatter" class="prime">
</div>
<style>
.ct-chart-bar, .ct-label{
  fill: white!important;
  color: white!important;
}
line.ct-grid{
  stroke: white!important;
  opacity: .5;
}
.ct-series-a .ct-bar, .ct-series-a .ct-line, .ct-series-a .ct-point, .ct-series-a .ct-slice-donut {
    stroke: #209cee;
}
</style>
<script>
socket.emit('getGiessenStats');
socket.emit('getChatterStats');
socket.on('getGiessenStats', function(totalWateredOnions, topGiesser){
  $('#totalWateredOnions').html(totalWateredOnions)
  labels = [];
  series = [];
  for(i=0;i<topGiesser.length;i++){
    labels.push(topGiesser[i].name)
    series.push(topGiesser[i].count)
  }
  new Chartist.Bar('#giesser', {
    labels: labels,
    series: [
      series
    ]
  }, {
    seriesBarDistance: 0,
    reverseData: true,
    horizontalBars: true,
    axisX: {
     onlyInteger: true,
     offset: 15
    },
    axisY: {
      offset: 150
    },
    height: topGiesser.length*20+'px',
    chartPadding: {
      right: 50
    }
  });
})

socket.on('getChatterStats', function(totalMessagesSent, topChatter){
  $('#totalMessagesSent').html(totalMessagesSent)
  labels = [];
  series = [];
  for(i=0;i<topChatter.length;i++){
    labels.push(topChatter[i].name)
    series.push(topChatter[i].count)
  }
  new Chartist.Bar('#chatter', {
    labels: labels,
    series: [
      series
    ]
  }, {
    seriesBarDistance: 0,
    reverseData: true,
    horizontalBars: true,
    axisX: {
     onlyInteger: true,
     offset: 15
    },
    axisY: {
      offset: 150
    },
    height: topChatter.length*20+'px',
    chartPadding: {
      right: 50
    }
  });
})
</script>
